<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
    

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?bdb1040c84d1099df4260f523b993574";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65976888-1', 'auto');
  ga('send', 'pageview');

</script>

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.4"/>


    <meta name="description" content="Dawei 的记事本" />



  <meta name="keywords" content="Dawei,bioinformatics,Hexo,next" />



  <link rel="alternate" href="/atom.xml" title="东隅" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.4" />


<meta name="description" content="Dawei 的记事本">
<meta property="og:type" content="website">
<meta property="og:title" content="东隅">
<meta property="og:url" content="http://daweih.github.io/index.html">
<meta property="og:site_name" content="东隅">
<meta property="og:description" content="Dawei 的记事本">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="东隅">
<meta name="twitter:description" content="Dawei 的记事本">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

    <title> 东隅 </title>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="en">
<!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->




<div class="container one-column 
   page-home 
">
    <div class="headband"></div>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
        <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">东隅</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-tags"></i> <br />
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-categories"></i> <br />
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/About" rel="section">
            <i class="menu-item-icon icon-about"></i> <br />
            About
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
<form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'ricZEzHT8MphMSw7Mx1g','2.0.0');
</script>

<div class="site-search-toggle"></div>
    </div>
  
</nav>


        </div>
    </header>

    <main id="main" class="main">
        <div class="main-inner">
            <div id="content" class="content">
                
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/09/25/code-mirror0/" itemprop="url">
                CodeMirror 学习笔记（0）
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-09-25T17:10:34+08:00" content="2016-09-25">
            2016-09-25
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/profession/" itemprop="url" rel="index"><span itemprop="name">profession</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/09/25/code-mirror0/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/25/code-mirror0/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>由于开发 FileMaker 系统下的脚本编辑和执行功能，需要让 FileMaker 内置更友好的代码编辑功能。因此调研了一番之后，发现在线支持语法高亮的代码编辑器 CodeMirror 适合，也方便移植，因此入坑（<a href="http://codemirror.net" target="_blank" rel="external">官方介绍</a>）。</p>
<p>本项目有个简单的实现在<a href="https://github.com/daweih/FileMakerScriptEditor" target="_blank" rel="external">这里</a>。</p>
<h5 id="部署">部署</h5><p>部署其实很简单 (以下代码不是真实的 Code Mirror)：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"codemirror.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"codemirror.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着引用需要显示的代码语言对应的 JS 库：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"javascript.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="In_FileMaker">In FileMaker</h5><p>在 FileMaker 内部引用，直接将代码提取到字段内，然后引用该字段，写入 web viewer 的代码区域即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"data:text/html,"</span></span><br><span class="line"> &amp;<span class="string">"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset='utf-8' /&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;script charset='utf-8'&gt;"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" FROM "</span></span><br><span class="line"> &amp; LeftValues (  Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" WHERE "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::Filename ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">"='codemirror.js' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/script&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;style type='text/css'&gt;¶"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" FROM "</span></span><br><span class="line"> &amp; LeftValues (  Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" WHERE "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::Filename ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">"='codemirror.css' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/style&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;script charset='utf-8'&gt;"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" FROM "</span></span><br><span class="line"> &amp; LeftValues (  Substitute ( GetFieldName ( WebPackages::code ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">" WHERE "</span></span><br><span class="line"> &amp; RightValues ( Substitute ( GetFieldName ( WebPackages::Filename ) ; <span class="string">"::"</span> ; ¶ ) ; <span class="number">1</span> ) &amp; <span class="string">"='"</span></span><br><span class="line"> &amp; Case ( Script Editor » Scripts::dtLanguage=<span class="string">"Perl Moudle"</span> ; <span class="string">"perl"</span> ; Lower ( Script Editor » Scripts::dtLanguage ) )</span><br><span class="line"> &amp; <span class="string">".js' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/script&gt;"</span></span><br></pre></td></tr></table></figure>
<p>注意，这里采用了 SQL 语句调用存储在表 WebPackages 中的代码，为了保证代码的鲁棒性，中间的 SQL 语句嵌套了很多 FileMaker 函数，如果简单写，则是这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"data:text/html,"</span></span><br><span class="line"> &amp; <span class="string">"&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;meta charset='utf-8' /&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;script charset='utf-8'&gt;"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT code FROM WebPackages WHERE Filename='codemirror.css' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/script&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;style type='text/css'&gt;¶"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT code FROM WebPackages WHERE Filename='codemirror.css' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/style&gt;"</span></span><br><span class="line"> &amp; <span class="string">"&lt;script charset='utf-8'&gt;"</span></span><br><span class="line"> &amp; ExecuteSQL ( <span class="string">"SELECT code FROM WebPackages WHERE Filename='perl.js' "</span>; <span class="string">""</span> ; <span class="string">""</span> )</span><br><span class="line"> &amp; <span class="string">"&lt;/script&gt;"</span></span><br></pre></td></tr></table></figure>
<p>将环境部署好之后，就可以调试功能了。加载脚本编辑器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> editor = CodeMirror.fromTextArea(<span class="built_in">document</span>.getElementById(<span class="string">'code'</span>), &#123;</span><br><span class="line">	<span class="comment">//options</span></span><br><span class="line">	lineNumbers: <span class="literal">true</span>,</span><br><span class="line">	matchBrackets: <span class="literal">true</span>,</span><br><span class="line">	lineWrapping: <span class="literal">true</span>,</span><br><span class="line">	indentUnit: <span class="number">4</span></span><br><span class="line">&#125;);</span><br><span class="line">editor.setSize(<span class="string">'auto'</span>, <span class="string">'auto'</span>);</span><br></pre></td></tr></table></figure>
<p>添加行号，折行（因为我们不希望 FileMaker 用户频繁地左右拖动，那个动作太反人类），让代码区域根据长度自动调整尺寸。</p>
<p>这个项目中采用了直接加载 DOM 中文本的模式加载数据，又有其他方法，比如使用上个语句块中 options 区域中的参数 value 传递。</p>
<h5 id="更多参数">更多参数</h5><h6 id="indentUnit">indentUnit</h6><p>integer. 定义锁进的单位。个人比较喜欢制表符大小的锁进，4个空格。</p>
<h6 id="theme">theme</h6><p>string. 配置编辑器的主题样式。个人感觉 ambiance 这个主题还是很好看的，如图。</p>
<p><center><img src="http://daweih.github.io/images/cm.0.png" alt="1" title="CodeMirrorOnFM"></center></p>
<h6 id="smartIndent">smartIndent</h6><p>boolean. 自动缩进: 是否根据上下文自动缩进，默认true。</p>
<h6 id="lineNumbers">lineNumbers</h6><p>boolean. 是否在编辑器左侧显示行号。</p>
<h6 id="undoDepth">undoDepth</h6><p>integer. 最大撤消次数，默认为200。</p>
<h4 id="Reference">Reference</h4><ol>
<li><a href="http://codemirror.net/" target="_blank" rel="external">Code Mirror</a><br><br><div align="center"><br><img src="http://daweih.github.io/images/wechat_small_black.jpg"><br></div></li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/09/25/filemaker2/" itemprop="url">
                FileMaker 和我的一些小故事 (2): 版本的故事－Base64Decode
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-09-25T14:12:32+08:00" content="2016-09-25">
            2016-09-25
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/profession/" itemprop="url" rel="index"><span itemprop="name">profession</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/09/25/filemaker2/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/25/filemaker2/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>似乎每次版本更新，FileMaker 都会给开发者带来一些“早就该有的”新功能。然而和 Apple Inc. 出 iPhone 的习惯一样，FileMaker 也不爱啰嗦把每次更新的内容说清楚，于是有了 Base64Decode 这个坑。</p>
<p><center><img src="http://daweih.github.io/images/fm2.0.png" alt="1" title="Export records"></center></p>
<p>在开发解决方案时，常常需要将数据库内的数据导出。除了常用的导出通道（Export）之外，FileMaker 14 支持将数据保存为容器中的文件。导出容器中的文件是 FileMaker 已经支持的功能，也可以用脚本执行。<a href="https://github.com/daweih/FileMakerScriptEditor/blob/master/base64encode.container.fmp12" target="_blank" rel="external">这里</a>有一个示例，演示在 13，14，15 上此功能的差别。采用的代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ Set Field [ container::container ; Base64Decode ( Base64Encode ( GetAsText ( container::text ) );<span class="string">"demo.txt"</span> ) ] </span><br><span class="line">$ Set Field [ container::File2Text ; Base64Decode ( Base64Encode ( container::container ) ) ]</span><br></pre></td></tr></table></figure>
<p>可以看出，将字段内的数据直接导出为文件或从文件导入到字段，一个命令搞定，非常方便。下一步就可以用这个文件调用外部程序处理了，比如用插件 <a href="http://www.360works.com/scriptmaster/" target="_blank" rel="external">ScriptMaster</a> 的运行脚本功能使用 perl 语言处理文本，会比 FileMaker 自带的脚本强大得多。基于这个设计，我做了 <a href="https://github.com/daweih/FileMakerScriptEditor" target="_blank" rel="external">FileMakerScriptEditor</a> 这个项目，可以在 FileMaker 内编辑脚本，运行脚本处理 FileMaker 内存储的数据。</p>
<p><center><img src="http://daweih.github.io/images/fm2.1.png" alt="2" title="base64encode.container.fmp12"></center></p>
<p>目前，FileMaker 最新的发行版是 15。在这个平台下开发出来的解决方案常常遇到需要对旧版本适配的问题。比如我供职的公司，就有大量的用户还在使用 FileMaker 13。比如上述功能，就产生了不兼容。于是免不了到处搜寻bug……最终，针对 FileMakerScriptEditor，采用了先计算客户端版本，在判断为 13 后，选择用 ScriptMaster 替代 Base64Decode 实现了此功能。</p>
<p>此外，从文件导入内容到字段的功能，最常用的另一个方面是库内置包的更新。我们知道，FileMaker 在 14 及以后的版本中，对 javascript 的支持越来越好。我们常用的 JS 包如果内置在库内部，直接调用，会比调用外部的包稳定很多。采用对拖入容器（container）的包直接提取代码，可以简单地实现拖入包文件即升级系统 JS 的包代码。此外，拖入文本文件直接导入其中的数据也是很便捷的一个应用。</p>
<h4 id="Reference">Reference</h4><ol>
<li><a href="http://www.filemaker.com/help/13/fmp/en/html/func_ref1.31.13.html" target="_blank" rel="external">Base64Decode</a></li>
<li><a href="https://github.com/daweih/FileMakerScriptEditor" target="_blank" rel="external">FileMakerScriptEditor</a></li>
<li><a href="http://www.360works.com/scriptmaster/" target="_blank" rel="external">ScriptMaster</a></li>
</ol>
<p><br></p>
<div align="center"><br><img src="http://daweih.github.io/images/wechat_small_black.jpg"><br></div></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2016/09/24/filemaker/" itemprop="url">
                FileMaker 和我的一些小故事 (1)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2016-09-24T22:44:31+08:00" content="2016-09-24">
            2016-09-24
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/profession/" itemprop="url" rel="index"><span itemprop="name">profession</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2016/09/24/filemaker/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/24/filemaker/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>第一次看到 FileMaker 是在三里屯的苹果零售店里。当时中国刚开了第一家零售店。在货架上看到了 FileMaker 的盒装版。</p>
<p>当时已经是资深的 Mac 用户，对苹果的软件总喜欢研究以下。看到 Apple Inc. 自己子公司的产品，自然想尝试一番。不过在试用的一个月内，并没有产生太好的印象，现在想来，可能是因为当时做生物信息用脚本语言太过于随意，对这种刻板的商业化软件，是在是体会不不到好处。</p>
<p>后来再深入接触已经是博士毕业以后了，开始做一些面向多用户的产品，数据库和网站也做了一些，逐渐开始体会到数据整合、标准格式、协作的优势。</p>
<p>现在做 FileMaker 开发也有 3 年多，可以算得心应手吧。过去学的很多语言和技术也都逐渐在这个平台上应用起来。总体上，FileMaker 确实是上手容易的数据库平台，有着 Apple 一贯易用的特色。单进阶还是比较难的。而且中文的教材也很缺乏。在国内想成为 FileMaker 高手，英语水平是硬性的指标。</p>
<p>不过由于部署容易，有商业化系统的安全性，授权费用也不高，FileMaker 还是很适合开发中小型企业的信息化的解决方案。对于中小型企业，本身 IT 团队就小。特别是一些非 IT 类的研发型公司，如农业公司、销售公司、试剂公司，本身公司结构就比较扁平，用户群体庞大，开发者遇到的问题比较稀碎，但却有数据集中化的需求。其数据库的维护本身就是个难题。FileMaker 的服务器端部署非常容易，解决方案文件也很容易部署。从而可以让开发者专注于如何将工作流程转化为解决方案。</p>
<p>此外，由于开发便捷，FileMaker 也适合快速将研究型流程转化为标准化的高通量流程。比如在生物信息分析中，常遇到的一个问题就是各自为战的研究者的脚本如何整合，实验室的研究如何延续。通过 FileMaker 的脚本编辑和执行功能，就可以很好地解决这个问题；同时 FileMaker 也可以调用存储的脚本在服务器端执行。同一个数据库实现了数据的存储、流程的整合、实验日志的收集和数据的分析等多项功能。很适合作为分子生物学实验室的核心过程管理＋数据管理系统。</p>
<h4 id="Reference">Reference</h4><ol>
<li><a href="http://www.filemaker.com" target="_blank" rel="external">FileMaker Inc.</a></li>
<li><a href="https://github.com/daweih/FileMakerScriptEditor" target="_blank" rel="external">我写的一个 FileMaker 脚本编辑和执行工具</a><br><br><div align="center"><br><img src="http://daweih.github.io/images/wechat_small_black.jpg"><br></div></li>
</ol>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/15/Beihai-after-8-years/" itemprop="url">
                北海 8 年后故地重游
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-15T23:02:44+08:00" content="2015-08-15">
            2015-08-15
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/15/Beihai-after-8-years/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/15/Beihai-after-8-years/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>第一次去北海，还是 2007 年，我刚到帝都某研究生院就读。阴差阳错，换了个象牙塔，彼时，我的学术理想树立起来，只是还没有血肉。</p>
<div align="center"><br><img src="http://daweih.github.io/images/beihai0.jpg"><br></div>

<p>记得是在和同学共游北海之前，第一次去挨着北海的中国美术馆看夕阳画展，当时纤细纯良，还没有感觉长发的邋遢和不整齐，尚尊敬自然如我师。第一次看高迪展，也是在那年夏天。</p>
<p>然后，8 年过去了。</p>
<p><div align="center"><br><img src="http://daweih.github.io/images/beihai1.jpg"><br></div></p>
<h5 id="第一次去看白塔，觉得无甚趣味，皇家园林看过许多，白塔都排不上号；此时依旧排不上，好在可以拍照发朋友圈。">第一次去看白塔，觉得无甚趣味，皇家园林看过许多，白塔都排不上号；此时依旧排不上，好在可以拍照发朋友圈。</h5><p><div align="center"><br><img src="http://daweih.github.io/images/beihai2.jpg"><br></div></p>
<h5 id="荷花年年盛开，人的心态却不断变化。过去无所畏惧，现在更是；咽回那些并不怕说出口的话的原因，现在变成了懒得去絮叨。">荷花年年盛开，人的心态却不断变化。过去无所畏惧，现在更是；咽回那些并不怕说出口的话的原因，现在变成了懒得去絮叨。</h5><p><div align="center"><br><img src="http://daweih.github.io/images/beihai3.jpg"><br></div></p>
<h5 id="颜值涨了一点点，对自拍的热爱增长了许多。">颜值涨了一点点，对自拍的热爱增长了许多。</h5><p><div align="center"><br><img src="http://daweih.github.io/images/beihai4.jpg"><br></div></p>
<h5 id="蓝天的日子变得屈指可数了（虽然并不记得_2007_年有多少天有蓝天，而且附近最近刚发生爆炸）。">蓝天的日子变得屈指可数了（虽然并不记得 2007 年有多少天有蓝天，而且附近最近刚发生爆炸）。</h5><p><div align="center"><br><img src="http://daweih.github.io/images/beihai5.jpg"><br></div></p>
<h5 id="花谢了结莲蓬，也好。">花谢了结莲蓬，也好。</h5></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/10/together/" itemprop="url">
                Business trip cycle begins
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-10T21:40:01+08:00" content="2015-08-10">
            2015-08-10
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/10/together/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/10/together/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><div align="center"><br><img src="http://daweih.github.io/images/together.jpg"><br></div>

<p>第一次出远门，家里只剩下一个人和两只鼠。被从实验室解救后，它们可还觉得滋润？</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/04/Coffee-Flavour-Wheel/" itemprop="url">
                移植，测试嵌入的 D3: Coffee Flavour Wheel
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-04T21:09:31+08:00" content="2015-08-04">
            2015-08-04
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/profession/" itemprop="url" rel="index"><span itemprop="name">profession</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/04/Coffee-Flavour-Wheel/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/04/Coffee-Flavour-Wheel/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>为了在 Hexo 系统的 <code>markdown</code> 正文中测试 <code>D3</code> 的可用性，移植了一个<code>咖啡风味轮</code>的可视化，如下：</p>
<h4 id="Coffee_Flavour_Wheel">Coffee Flavour Wheel</h4><script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<div align="center" id="vis" style="font-size:13pt;font-family:helvetica;zoom:0.4;"></div>
<script src="http://daweih.github.io/js/coffee_flavour_wheel.js" charset="utf-8"></script>
<script>
//    d3.select("div#vis").remove();
</script>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"</span> charset=<span class="string">"utf-8"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;div align=center id=<span class="string">"vis"</span> style=<span class="string">"font-size:13pt;font-family:helvetica;zoom:0.4;"</span>&gt;&lt;/div&gt;</span><br><span class="line">&lt;script src=<span class="string">"http://daweih.github.io/js/coffee_flavour_wheel.js"</span> charset=<span class="string">"utf-8"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="代码注释：">代码注释：</h4><ul>
<li>第一行装载 <code>D3</code> 包。</li>
<li>第二行，插入绘图区域，这里的绘图区域是用 <code>div#viz</code> 来定位并操作</li>
<li>第三行，引用绘图用代码，保存在 <code>Hexo</code> 博客系统的 <code>js</code> 文件夹下，会被同步到 github。当然你也可以通过用 <code>&lt;script&gt;&lt;/script&gt;</code> 直接嵌入本页。个人更推荐单独存放，避免 markdown 页面太长。</li>
</ul>
<h4 id="编写小贴士">编写小贴士</h4><ul>
<li><strong>改动 <code>md</code> 文件后直接看效果：</strong>对 DOM 的 <code>attr</code> 和 <code>style</code> 编写，更改无需 <code>hexo d</code>, <code>hexo d</code>，就可以在 <code>hexo s</code> 开启状态的浏览器中查看。写可视化代码时候，需要经常看改动带来的变化，此时可以省去前述的两步。</li>
<li><strong>在 md 文件中编写并测试 <code>js</code> 代码：</strong>使用 <code>hexo s</code> 测试中，代码需要写在页面内测试。测试完毕后再移动到独立文件。因为 gihub 处的代码改动需要 <code>git commit</code>, <code>git push</code> 之后才会生效。如果每次改动后都进行前面 2 项操作，则无妨。这里的问题在于，<code>hexo s</code> 状态下，无法引用本地的文件。这个问题在图片的引用代码中，也是让人不爽。</li>
<li><strong>模块化：</strong>重复使用的 js 代码，尽量放在一处，引用到每个页面，减少维护的复杂度。</li>
</ul>
<p>目前，文章页面的 <code>CSS</code> 还是无法通过嵌入正文生效。需要 D3 直接写入 <code>DOM</code> 的属性。</p>
<p><code>D3</code> 在本站嵌入成功后，我就可以做一些可视化的学习笔记。这样，在笔记里面，就可以添加实时的演示了。</p>
<p>本次嵌入的可视化来自<a href="http://www.jasondavies.com/coffee-wheel/" target="_blank" rel="external">这里</a>。</p>
<h4 id="其他相关博文">其他相关博文</h4><ul>
<li><a href="http://daweih.github.io/2015/07/20/viz-of-chromosome/">一个染色体的可视化</a></li>
</ul>
<p><br></p>
<div align="center"><br><img src="http://daweih.github.io/images/wechat_small_black.jpg"><br></div>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/04/reading-note-Becoming-a-technical-leader/" itemprop="url">
                Reading note 1: Becoming a technical leader
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-04T18:17:05+08:00" content="2015-08-04">
            2015-08-04
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/reading/" itemprop="url" rel="index"><span itemprop="name">reading</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/04/reading-note-Becoming-a-technical-leader/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/04/reading-note-Becoming-a-technical-leader/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><div align="center"><br><img src="http://daweih.github.io/images/leader.jpg"><br></div>

<p>本书的好处，不再多说。可以看<a href="http://book.douban.com/review/6789847/" target="_blank" rel="external">这里</a>和<a href="http://blog.youxu.info/2015/05/17/tech-lead-1/" target="_blank" rel="external">这里</a>。</p>
<p>作为一个重度强迫症患者和整理狂人，读书要做的第一件事不言自明。</p>
<h3 id="优化博客的笔记系统">优化博客的笔记系统</h3><p>本书是我第一本认真去读的管理类书籍。本着不作就不会死的精神，配置个让自己舒坦的笔记系统。</p>
<h4 id="植入目录">植入目录</h4><p>使用了 <code>OmniOutliner</code> 来整理笔记，所以想直接嵌入到博客系统里。于是采用了 <code>iframe</code> 。</p>
<div align="center"><br><img src="http://daweih.github.io/images/omnioutliner.jpg"><br></div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div align=center&gt;</span><br><span class="line">&lt;iframe scrolling=<span class="string">"value"</span> src=<span class="string">"http://daweih.github.io/js/becoming_a_technical_leader.html/index.html"</span> width=<span class="number">90</span>% height=<span class="number">450</span>px frameborder=<span class="string">"0"</span> scrolling=<span class="string">"yes"</span>&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1 行：目录块在页面居中对齐</li>
<li>第 2 行：目录文件采用嵌入方式进入博客文章，其文件是 OmniOutliner 生成的动态 html。</li>
</ul>
<h4 id="优化效果">优化效果</h4><p>为了让目录的效果在不同设备上达到一样的水准，以便长期使用，做了一些优化，有以下几点：</p>
<ol>
<li><code>width</code> 采用了 <code>90%</code>是为了在 <code>iPad</code>、<code>iPhone</code> 和电脑上都有比较好的显示效果；<code>height</code> 采用固定高度，为了避免页面过长。</li>
<li><p>为了缩放之后，iframe 内容依然可以居中，在 <code>oo3</code> 转化的网页中 <code>table</code> 根处添加属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">table</span> <span class="attribute">align</span>=<span class="value">"center"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>为了改进缩放，强制 oo3 转化的网页宽度为 <code>310px</code>，修改代码为:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">table</span><span class="class">.row</span> <span class="rules">&#123;</span><br><span class="line">						<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">310px</span></span></span>;</span><br><span class="line">			</span><br><span class="line">			&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>得到的目录效果如下。</p>
<h3 id="本书目录">本书目录</h3><div align="center"><br><iframe scrolling="value" src="http://daweih.github.io/js/becoming_a_technical_leader.html/index.html" width="90%" height="450px" frameborder="0"></iframe><br></div>

<h3 id="本周进度">本周进度</h3><p>周四、五非常忙，以至于周二拿到的书，只两天拿出时间来看。</p>
<p>本书在前言中说：</p>
<blockquote>
<p>如果你真的希望提升行动力，应该首先制订计划，制订好计划之后应该按时执行……想要有时间做自己的事情，应当把一切事情保持在井然有序的状态……</p>
</blockquote>
<p>我的评论：</p>
<ul>
<li>阅读的质量还在其次，目前的要务还是要提高计划的执行度。</li>
<li>之前了解过的法国厨房标准操作流程，其原则的目的和“保持一切井然有序”的目的是一致的。</li>
</ul>
<p>读后，思考本周五的工作中，SOP 的问题也在于，流程繁琐，没有模块化，导致“保持一切井然有序”的操作步骤过多，时间成本升高。SOP 的文档写作不够清晰。对细节的记述不够详细。所以会依赖员工的<code>经验</code>。</p>
<p><code>经验</code>之类，如果没有<code>记录在案</code>，就不能流传。所以员工的遗忘，会造成额外的时间成本（二次培训、操作错误等）。解决方法无外乎：</p>
<ul>
<li>去掉需要<code>经验</code>的部分，将流程封装为黑匣子，减少可能出错的步骤。</li>
<li>将经验写入标准操作流程。</li>
</ul>
<p>显然后者，会给 SOP 的作者和读者都带来更多成本（写作、阅读、操作）。依据模块化的原则，第一种方法更可行。</p>
<h3 id="实践出真知">实践出真知</h3><p>工作的主要目标，还是要完成项目。但不改进流程，完成项目的水平难以提升，效率也难提高。</p>
<p>磨刀不误砍柴工的道理，看似浅显，但包含了短期效益和长期效益的博弈。从发展的视角看，打磨是长期规划中必不可少的部分。</p>
<p>井然有序，是控制狂人的标签。我被如此看待也是无奈。但对工作的优化与打磨还是要推行的。</p>
<h3 id="Reference">Reference</h3><ol>
<li><a href="http://book.douban.com/subject/1807715/" target="_blank" rel="external">Becoming a Technical Leader</a> by Gerald M. Weinberg</li>
<li><a href="http://book.douban.com/subject/26419762/" target="_blank" rel="external">成为技术领导者</a> by Gerald M. Weinberg, 译者: 余晟</li>
</ol>
<h3 id="题外话：在_OmniOutliner_中使用正则表达式">题外话：在 OmniOutliner 中使用正则表达式</h3><p>犯懒了，如图：</p>
<div align="center"><br><img src="http://daweih.github.io/images/omni_find.png"><br></div>

</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/02/tianjin-2-day/" itemprop="url">
                津门非主流游玩
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-02T19:48:22+08:00" content="2015-08-02">
            2015-08-02
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/02/tianjin-2-day/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/02/tianjin-2-day/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>周末去天津玩，按工作日通勤时间起床，一个小时的地铁，半个小时的火车，抵达。</p>
<p>上一次去还是去欣赏<code>废 (háng) 铁 (mû</code>)，瞻仰<code>先贤祠堂</code>，间隔数年，心态大不同。</p>
<p>住<code>利兹卡尔顿</code>，去临近的老<code>利顺德</code>玩，拍完照片自然要发 SNS，然后被评论“进入了游戏场景”。好吧，其实我还挺期待真正的“洋馆之旅”，全程小刀。</p>
<p><center><img src="http://daweih.github.io/images/tj1.jpg" alt="1" title="经典的复古楼梯"><br><img src="http://daweih.github.io/images/tj2.jpg" alt="2" title="大陆最早的客用电梯，铁达尼的复古感"><br><img src="http://daweih.github.io/images/tj3.jpg" alt="3" title="就差红漆来烘托气氛了"><br><img src="http://daweih.github.io/images/tj4.jpg" alt="4" title="Red Quene 的宫殿"></center></p>
<p>然后隔墙偷拍久负盛名，号称向高迪致敬，但我感觉阴气森森的瓷房子，主题自“<code>Biohazard</code>”换成“<code>Thriller</code>”，于是晚上回去复习了一下 <code>MJ</code>。</p>
<p><center><img src="http://daweih.github.io/images/tj5.jpg" alt="5" title="China House"></center></p>
<p>当然，<code>相声</code>自然是不可错过的。来，爷们亮个相；舞台质量真不错，不仅结实，而且出的这响儿附赠您心跳的。</p>
<p><center><img src="http://daweih.github.io/images/tj6.jpg" alt="6" title="万一倒了会坐死人的亮相，金鸡独立"></center></p>
<p>萌宠压轴，最后负责拉赞，黑猫警长，拜托了。</p>
<p><center><img src="http://daweih.github.io/images/tj7.jpg" alt="7" title="黑猫警长：今天吐毛日。这草咋咬不动？"><br><img src="http://daweih.github.io/images/tj8.jpg" alt="8" title="娃娃的毛被剃了"></center></p>
<p>懒散二日游，慢慢走，休闲不累，周末该如此。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/08/01/Looing-for-data-at-SRA/" itemprop="url">
                Looing for publicly available NGS data
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-08-01T04:24:05+08:00" content="2015-08-01">
            2015-08-01
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/profession/" itemprop="url" rel="index"><span itemprop="name">profession</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/08/01/Looing-for-data-at-SRA/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/08/01/Looing-for-data-at-SRA/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>最近 2 年，NGS 的成本越来越低，让研究者可以产生大量的数据，其中有很多优秀的工作，发表了高水平文章。</p>
<div align="center"><br><img src="http://daweih.github.io/images/sra.jpg"><br></div>

<h3 id="主要的_NGS_原始数据库">主要的 NGS 原始数据库</h3><p>按照学术期刊的要求（比如CNS），NGS 的原始数据，在发表前一般会被上传到几个主要的数据库，包括：</p>
<ul>
<li><a href="http://www.ncbi.nlm.nih.gov/sra" target="_blank" rel="external">NCBI European Nucleotide Archive (SRA)</a></li>
<li><a href="http://www.ebi.ac.uk/ena" target="_blank" rel="external">EBI European Nucleotide Archive (ENA)</a></li>
</ul>
<p>作为期刊的读者，我们需要下载某些数据，无非是基于以下一些原因：</p>
<ul>
<li>数据基于的物种 / 组织是研究对象。通过下载公共数据而非自产，来节约研究的开支</li>
<li>对研究者发表的结果感兴趣，想进行重复或深入研究；认为发表数据的研究者有遗漏或忽略了重要的研究方向，想对其数据进入深入挖掘</li>
<li>想用数据来练手（这个动机在学生中很普遍）</li>
</ul>
<p>当然，还会有其它原因，欢迎补充。于是，如何下载呢？</p>
<h3 id="通过文章正文内的线索来寻找">通过文章正文内的线索来寻找</h3><p>这种情况下，发表的文章会直接给出数据提交到的数据库，数据的 accession。比如：</p>
<blockquote>
<p>DNA sequencing data are deposited in the <code>European Nucleotide Archive</code> (<a href="http://www.ebi.ac.uk/ena/" target="_blank" rel="external">http://www.ebi.ac.uk/ena/</a>) under <u style="color:darkred"><code>accession numbers</code> ERP001143, ERP000729 and ERP000106.</u> De novo assembly and genome annotation of wild rice W1943, the genotype dataset of 1,529 rice accessions and the imputed dataset of 446 O. rufipogon accessions for GWAS are available at the Rice Haplotype Map Project database (<a href="http://www.ncgr.ac.cn/RiceHap3" target="_blank" rel="external">http://www.ncgr.ac.cn/RiceHap3</a>). [1]</p>
</blockquote>
<p>再比如：</p>
<blockquote>
<p>Accession codes. Raw sequences have been deposited in the EBI European Nucleotide Archive with <u style="color:darkred">accession number ERP000729 for worldwide rice germplasm (330 worldwide rice accessions: ERS037511–ERS037840)</u> and with accession number ERP000106 for Chinese rice landraces (100 newly added Chinese rice landraces: ERS039279–ERS039378). [2]</p>
</blockquote>
<h3 id="通过数据库的分类系统来寻找，筛选">通过数据库的分类系统来寻找，筛选</h3><p>通过关键词系统、分类系统，你可以在一个数据库，整合所有符合你研究兴趣的数据。</p>
<h3 id="通过其他信息定位">通过其他信息定位</h3><p>但很多时候，文章的作者并没有给出数据具体的存放位置，或者没有给出数据的ID。我们无法很简单地确定数据的位置，这样就要通过多方面的信息来判断。比如参考文献 [3] 就是如此。在这篇文献里，虽然没有给出具体的位置和数据的 accession，但可以参考的信息还有很多，比如：</p>
<ol>
<li>物种是 <em>Triticum aestivum</em> L. cv Chinese Spring</li>
<li>发表日期：Published 18 July 2014</li>
<li>作者单位：Department of Plant Sciences/Centre for Integrative Genetics,The Norwegian University of Life Sciences (NMBU)</li>
<li>Paired end (PE) sequencing libraries</li>
<li>HiSeq2000 (Illumina, San Diego, USA)</li>
<li>RNA was isolated and prepared for RNA-seq by using paired-end libraries with <u style="color:darkred">200–base pair inserts for 30 samples</u> with four biological replicates per cell type and time point (two replicates per room) and two additional technical replicates. Total RNA was extracted from frozen plant material using the RNeasy Lipid Tissue Mini kit (QIAGEN, Hilden, Germany; <a href="http://www.qiagen.com/applications/plant" target="_blank" rel="external">http://www.qiagen.com/applications/plant</a>). </li>
</ol>
<p>用文章的标题、物种名、技术和研究的关键词作为搜索条件，利用 google 的搜索和在数据库内的检索，定位到候选纪录。</p>
<p>通过和潜在的数据的<a href="http://www.ncbi.nlm.nih.gov/bioproject/?term=%22Genome+interplay+in+the+grain+transcriptome+of+hexaploid+bread+wheat%22" target="_blank" rel="external">基本信息</a>的比较，发现支持此数据为文章的数据：</p>
<ol>
<li>Organism:    <em>Triticum aestivum</em>, cultivar: Chinese Spring</li>
<li>Registration date: 19-Jul-2014</li>
<li>Submitted by: Department of Plant and Environmental Sciences/CIGENE, Norwegian University of Life Sciences</li>
<li>Paired end (PE) sequencing libraries</li>
<li>Illumina HiSeq 2000</li>
<li>30 samples. Total RNA was extracted from frozen plant material using the RNeasy Lipid Tissue Mini kit (QIAGEN, Hilden, Germany; <a href="http://www.qiagen.com/applications/plant" target="_blank" rel="external">http://www.qiagen.com/applications/plant</a>). Illumina TruSeq RNA Sample Preparation Kits v2</li>
</ol>
<p>上面的信息的排列，我按照一一对应做了总结。比对之后，确信这个数据和文章的对应关系。</p>
<p>之后就可以把每个 SRA 文件的取样和实验信息整理成表，和发表的文章的信息做对照（这里就开始细活了）。</p>
<h3 id="下载方法">下载方法</h3><p>SRA 数据的下载方法，推荐使用 Aspera。用法请参考<a href="http://daweih.github.io/2015/07/24/aspera-download-data-from-sra/">旧时博文</a>。对于数据量较少的，也可以使用 wget 等命令下载，但耗时较长。</p>
<h3 id="Reference">Reference</h3><ol>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=23034647" target="_blank" rel="external">Huang, X. et al. A map of rice genome variation reveals the origin of cultivated rice. Nature 490, 497–501 (2012).</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=20972439" target="_blank" rel="external">Huang, X. et al. Genome-wide association studies of 14 agronomic traits in rice landraces. Nat. Genet. 42, 961–967 (2010).</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/pubmed/?term=25035498" target="_blank" rel="external">Pfeifer, M. et al. Genome interplay in the grain transcriptome of hexaploid bread wheat. Science 345, 1250091–1250091 (2014).</a></li>
</ol>
<p><br></p>
<div align="center"><br><img src="http://daweih.github.io/images/wechat_small_black.jpg"><br></div></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/07/25/coffee-easy-to-make/" itemprop="url">
                懒人适用的咖啡具
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-07-25T14:06:27+08:00" content="2015-07-25">
            2015-07-25
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; In
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/life/" itemprop="url" rel="index"><span itemprop="name">life</span></a></span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/07/25/coffee-easy-to-make/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/25/coffee-easy-to-make/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>原文发表于<a href="https://qdan.me/list/VUyyEZpuJz48iJfh?from=mylists" target="_blank" rel="external">轻单</a>，由于它濒死，于是转载于此。</p>
<p>作为一个咖啡爱好者，偶尔也发点非专业类的文章在这个博客。生活若完全没有了情调，人也会变得无聊吧。</p>
<hr>
<p>想享受咖啡又 (xiâng) 犯 (shêng) 懒 (qián) ？请看。</p>
<h4 id="法压壶">法压壶</h4><p>使用金属滤网。放入磨好的粉，泡上热水，压下，倒出。丢弃咖啡渣，热水冲干净即可。</p>
<div align="center"><br><img src="http://daweih.github.io/images/coffee_qdan1.jpg"><br></div>

<h4 id="摩卡壶">摩卡壶</h4><p>爱咖啡的油脂？用摩卡壶。</p>
<ul>
<li>装粉，装水，组装壶。加热，出咖啡后拆开壶清洗。</li>
<li>优点：使用金属滤网，好清洗；缺点：需要热源。</li>
</ul>
<div align="center"><br><img src="http://daweih.github.io/images/coffee_qdan2.jpg"><br></div>

<h4 id="不锈钢过滤器">不锈钢过滤器</h4><ul>
<li>优点：金属滤网好清洗；</li>
<li>缺点：萃取不能一次完成（需要多次注水来萃取），需要有个注水的壶。</li>
</ul>
<p>配一把手冲壶，还是有必要的。可有做出优秀的单品咖啡。</p>
<div align="center"><br><img src="http://daweih.github.io/images/coffee_qdan3.jpg"><br></div>

<h4 id="越南咖啡过滤器">越南咖啡过滤器</h4><p>嫌单品太苦，试试越南咖啡，配炼乳。</p>
<ul>
<li>优点：注水后等着就行了。</li>
<li>缺点：需要滤纸。</li>
</ul>
<div align="center"><br><img src="http://daweih.github.io/images/coffee_qdan4.jpg"><br></div>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </nav>


            </div>

            

            
        </div>

        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="Dawei Huang" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Dawei Huang</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Dawei 的记事本</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">5</span>
              <span class="site-state-item-name">categories</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">49</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/daweih" target="_blank">github</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/daweimhuang" target="_blank">facebook</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/daweihuang" target="_blank">twitter</a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.douban.com/people/4878302/" target="_blank">douban</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name">Links</p>
            
              <span class="links-of-author-item">
              <a href="http://ic4r.org 水稻数据库" target="_blank">IC4R</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://cat.big.ac.cn" target="_blank">Cloud CAT</a>
              </span>
            
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
        <div class="footer-inner">
            
<div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dawei Huang</span>
</div>

<div class="powered-by">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">Accessed <span id="busuanzi_value_site_pv"></span> times. </span>
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



        </div>
    </footer>

    <div class="back-to-top"></div>
</div>

<script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"daweih"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	  <script type="text/javascript">
  		var duoshuo_user_ID = daweih
  	  </script>
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.4"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.4"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.4" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>



<script type="text/javascript">
    $(document).ready(function () {
        if (CONFIG.sidebar === 'always') {
            displaySidebar();
        }
    });
</script>




  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"daweih"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	  <script type="text/javascript">
  		var duoshuo_user_ID = daweih
  	  </script>
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

  





<!-- lazyload -->
<script type="text/javascript" src="/js/lazyload.js"></script>
<script type="text/javascript">
    jQuery(function () {
        jQuery("#posts img").lazyload({
            placeholder: "/images/loading.gif",
            effect: "fadeIn"
        });
    });
</script>
</body>
</html>
